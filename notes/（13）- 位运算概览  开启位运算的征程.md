# （13）- 位运算概览 | 开启位运算的征程

[toc]

一、再谈二进制

- 我们在学习==光天化日学C语言（06）- 进制转换入门==的时候，曾经提到过二进制。

> 二进制就是逢二进一，计算机中的存储采用的就是二进制。

- 在计算机中，非零即一。

1. ### 二进制数值表示

   - 例如，在计算机中，我们可以用单纯的 0 和 1 来表示数字。

   > 1、101、1100011、100101010101 都是二进制数。
   > 123、423424324、101020102101AF 则不是，因为有 0 和 1 以外的数字位。

   - 一般为了不产生二义性，我们会在数字的右下角写上它的进制，例如：

   - $$
     1010_{(10)}
     $$

   - 代表的是十进制下的 1010，也就是十进制下的 “一千零一十”。

   - $$
     1010{(2)}
     $$

   - 代表的是二进制下的 1010，也就是十进制下的 “十”。

2. ### 二进制加法

   > 二进制加法采用从低到高的位依次相加，当相加的和为2时，则向高位进位。

   - 例如，在二进制中，加法如下：

$$
1_{(2)}+1_{(2)}=10_{(2)}\\
1_{(2)}+0_{(2)}=1_{(2)}\\
0_{(2)}+1_{(2)}=1_{(2)}\\
0_{(2)}+0_{(2)}=0_{(2)}
$$

3. ### 二进制减法

   > 二进制减法采用从低到高的位依次相减，当遇到 0 减 1 的情况，则向高位借位。

   - 例如，在二进制中：减法如下：

   $$
   1_{(2)}-1_{(2)}=0_{(2)}\\
   1_{(2)}-0_{(2)}=1_{(2)}\\
   10_{(2)}-1_{(2)}=1_{(2)}\\
   0_{(2)}-0_{(2)}=0_{(2)}
   $$

## 一、位运算简介

- 位运算可以理解成对二进制数字上的每一个位进行操作的运算。
- 位运算分为 布尔位运算符 和 移位位运算符。
- 布尔位运算符又分为 位与(&)、位或(|)、异或(^)、按位取反(~)；移位位运算符分为 左移(<<) 和 右移(>>)。
- 如图所示：

![20210630085908172](D:/GitRep/CP/notes/%EF%BC%8813%EF%BC%89-%20%E4%BD%8D%E8%BF%90%E7%AE%97%E6%A6%82%E8%A7%88%20%20%E5%BC%80%E5%90%AF%E4%BD%8D%E8%BF%90%E7%AE%97%E7%9A%84%E5%BE%81%E7%A8%8B.assets/20210630085908172.png)

- 接下来几天，每天都会更新一篇，对每个位运算符的详细解读，并且配有例题。

## 二、位运算概览

- 今天，我们先来对位运算进行一个初步的介绍。后面会对每个运算符的应用做详细介绍，包括刷题的时候如何运用位运算来加速等等。

1. ### 布尔位运算

   - 对于布尔位运算，总共有四个，如下表所示：

   | C语言运算符表示 | 含义     | 示例   |
   | --------------- | -------- | ------ |
   | &               | 位与     | x & y  |
   | \|              | 位或     | x \| y |
   | ^               | 异或     | x ^ y  |
   | ~               | 按位取反 | x ~ y  |

   1. #### 位与

      - 位与就是对操作数的每一位按照如下表格进行运算，对于每一位只有 0 或 1 两种情况，所以组合出来总共2^2^=4种情况。

      | 左操作数 | 右操作数 | 结果 |
      | -------- | -------- | ---- |
      | 0        | 0        | 0    |
      | 0        | 1        | 0    |
      | 1        | 0        | 0    |
      | 1        | 1        | 1    |

      > 位运算的特点是：只要出现零，结果就为零。

      ```c
      #include <stdio.h>
      int main() {
          int a = 0b1010;           // (1)
          int b = 0b0110;           // (2)
          printf("%d\n", (a & b) ); // (3)
          return 0;
      }
      ```

      1. 在C语言中，以`0b`作为前缀，表示这是一个二进制数。那么a的实际值就是(1010)~2~。
      2. 同样的,`b`的实际值就是(0110)~2~。
      3. 那么这里`a & b`就是对(1010)~2~和(0110)~2~的每一位做表格`&`运算。
      4. 所以最后输出结果为

      ```c
      2
      ```

      - 因为输出的是十进制数，它的二进制表示为：(0010)~2~。
      - 注意：这里的 **前导零** 可有可无，作者写上前导零只是为了对齐以及让读者更加清楚位与的运算方式。

   2. #### 位或

      - 位或的运算结果如下：

      | 左操作数 | 右操作数 | 结果 |
      | -------- | -------- | ---- |
      | 0        | 0        | 0    |
      | 0        | 1        | 1    |
      | 1        | 0        | 1    |
      | 1        | 1        | 1    |

      > 只要出现1，结果就为1。

      - 我们来看以下这段程序：

      ```c
      #include <stdio.h>
      int main() {
          int a = 0b1010;
          int b = 0b0110;         
          printf("%d\n", (a | b) );
          return 0;
      }
      ```

      - 以上程序的输出结果为：

      ```c
      14
      ```

      - 即二进制下的（1110）~2~

   3. #### 异或

      - 异或的运算结果如下：
      | 左操作数 | 右操作数 | 结果 |
      | -------- | -------- | ---- |
      | 0        | 0        | 0    |
      | 0        | 1        | 1    |
      | 1        | 0        | 1    |
      | 1        | 1        | 0    |

      > 只要相同就为零，不同就为1

      - 我们来看以下这段程序：

      ```c
      #include <stdio.h>
      int main() {
          int a = 0b1010;       
          int b = 0b0110;          
          printf("%d\n", (a ^ b) ); 
          return 0;
      }
      ```

      - 以上程序的输出结果为：

      ```c
      12
      ```

      - 即二进制下的(1100)~2~。

   4. #### 按位取反

      - 按位取反其实就是 0 变 1， 1 变 0。
      - 同样，我们来看一段程序。

      ```c
      #include <stdio.h>
      int main() {
          int a = 0b1;
          printf("%d\n", ~a );
          return 0;
      }
      ```

      - 至于为什么会输出这个结果，我会在==光天化日学C语言（17）- 位运算 ~==的应用中进行详细讲解，敬请期待。

2. ### 移位位运算

   - 对于移位位运算，总共有两个，如下表所示：

   | C语言运算符表示 | 含义 | 示例     |
   | --------------- | ---- | -------- |
   | `<<`            | 左移 | `x << y` |
   | `>>`            | 右移 | `x >> y` |

   1. #### 左移

      - 其中x << y代表将二进制的 x 的末尾添加 y 个零，就好比向左移动了 y 位。
      - 比如(1011)~2~左移三位的结果为：(1011000)~2~。

   2. 右移

      - 其中x >> y代表将二进制的 x 从右边开始截掉 y 个数，就好比向右移动了 y 位。
      - 比如(101111)~2~右移三位的结果为：(101)~2~。
