# （23）- 整数的存储 | 补码到底有什么用？

[toc]

## 三、整数简介

### 1、符号位和数值位

- 我们知道 整数 分为 有符号整型 和 无符号整型。
- 有符号整型，程序需要区分 **符号位** 和 **数值位**。

- 对我们人类来说，很容易分辨；而对计算机而言，就要设计专门的电路，这就增加了硬件的复杂性，从而增加了计算的时间。

> 所以，如果能够将 **符号位** 和 **数值位** 联合起来，让它们共同参与运算，不再加以区分，这样硬件电路就会变得更加简单。

### 2、整型的加减运算

- 其次，**加法** 和 **减法** 的引入，也将问题变得复杂。而由于减去一个数相当于加上这个数的相反数，例如：`1 - 2`等价于 `1 + (-2)`，`1 - (-2)`等价于`1 + 2`。

> 所以，它们可以合并为一种运算，即只保留加法运算。

- 相反数是指 数值位 相同，符号位 不同的两个数，例如，1 和 -1 就是一对相反数。

---

- 所以，我们需要做的就是设计一种简单的、不用区分符号位和数值位的加法电路，就能同时实现加法和减法运算。首先让我们看几个计算机中的概念。

## 四、机器数和真值

### 1、机器数

- 我们知道计算机是内部由 0 和 1 组成的编码，无论是整数还是浮点数，都会涉及到负数，对于机器来说是不知道正负的，而 “正” 和 “负” 正好是两种对立的状态，所以规定用 “0” 表示 “正”，“1” 表示 “负”，这样符号就被数字化了，并且将它放在有效数字的前面，就成了有符号数；
- 把符号 “数字化” 的数称为 机器数；

### 2、真值

- 而带有 “+” 或者 “-” 的数称为 真值；
- 然而，当符号位和数值部分放在一起后，如何让它一起参与运算呢？那就要涉及到接下来要讲的计算机的各种编码了。

## 五、计算机编码

### 1、原码

1. #### 定义

   - 这里的原码并不是源码（源代码）的意思，而是机器数中最简单的一种表示形式；为了快速理解，这里只介绍 32位整数；

   > **【定义】** **符号位** 为 **0** 代表 **正数**，**符号位** 为 **1** 代表 **负数**，**数值位** 为 **真值的绝对值**。

2. #### 举例

   - 1. 对于十进制数 37，它的 真值 和 原码 关系如下：

   ```c
   真值：+ 00000000 00000000 00000000 00100101
   原码：  00000000 00000000 00000000 00100101
   ```

   - 2. 对于十进制数 -37，它的 真值 和 原码 的关系如下：

   ```c
   真值：- 00000000 00000000 00000000 00100101
   原码：  10000000 00000000 00000000 00100101
   ```

   - 我们发现，对于负数的情况，原码 加上 真值（注意，这里真值为负数）后，二进制数正好等于1(0...0)~2~，即2^31^，表示成公式如下

   $$
   [x]_{原}+x=2^31
   $$

3. #### 公式

   - 因此，我们可以通过移项，得出原码的十进制计算公式如下：

   > $$
   > 
   > $$
   >
   > 