#                    （29）- while 语句 | 死循环啦！

[toc]

## 一、程序结构概述

> 在C语言中，共有三大常用的程序结构：
>
>   **顺序结构：** 代码从前往后执行，没有任何跳转；
>
>   **选择结构 ：** 也叫分支结构，即 if else、switch 以及条件运算符；
>
>   **循环结构：** 即重复执行同一段代码。

## 二、循环结构简介

> 所谓循环结构，就是重复执行同一段代码。

```c
#include <stdio.h>
int main() {
    printf("I love you!\n");
    printf("I love you!\n");
    printf("I love you!\n");
    printf("I love you!\n");
    printf("I love you!\n");
    printf("I love you!\n");
    printf("I love you!\n");
    printf("I love you!\n");
    return 0;
} 
```

- 重要的是，当输出语句为 100 条时，如果还用上面的思路进行输出，整个代码就会显得非常臃肿和冗余。所以，我们需要引入一种能够循环执行代码的结构。

### 1、while 语句

#### 1）语法规则

- while 语句的一般形式为：

```c
while(表达式){
    语句块
}
```

> 它的含义是：
>
>   1）首先，计算 **表达式** 的值，当值为真时， 执行 **语句块** 的内容；
>
>   2）然后，再次计算 **表达式** 的值，如果为真，继续执行 **语句块**……
>
>   这个过程会一直重复，直到表达式的值为假，则退出循环，执行 while 后面的代码。

- 我们通常将上述的 **表达式** 称为循环条件，把 **语句块** 称为循环体，整个循环的过程就是不停判断 **循环条件**、并执行 **循环体代码** 的过程。

- 例如，我们可以把输出 100 条 “I love you!” ，写成如下代码：

```c
#include <stdio.h>
int main() {
    int iCount = 0;                // (1)
    while(iCount < 100) {          // (2)
        printf("I love you!\n");   // (3)
        ++iCount;                  // (4)
    }
    return 0;
} 
```

- (1) 初始化一个计数器`iCount`为 0；
- (2) 由于计数器小于 100，所以循环条件为真，则执行循环体；
- (3) 输出一句话；
- (4) 计数器自增；
- 目前为止，已经输出了一句话，并且计数器`iCount`为 1，继续回到 while 部分判断计数器是否小于 100，成立则继续执行，当循环体执行了 100 次以后，`iCount`的值为 100，此时条件不满足，遂跳出循环。
- while 循环可以这么设计：设置一个带有变量的循环条件；在循环体中额外添加一条语句，让它能够改变循环条件中变量的值。这样，随着循环的不断执行，循环条件中变量的值也会不断变化，终有一个时刻，循环条件不再成立，循环就结束了。

#### 2）死循环

- 当循环条件永远成立的时候，while 循环会一直执行下去，这就是我们通常所说的 **死循环** 。如下代码所示：

```c
#include <stdio.h>
int main(){
    while(1) {
        printf("I love you!\n");
    }
    return 0;
}
```

- 它会不停地输出“1”，直到用户强制关闭进程。

#### 3）简单应用

- 输入输出是我们常用的一种来测试算法实现正确性的方式。例如，当我们需要进行循环输入 a 和 b，并且输出 a + b 的值的时候，我们就可以这么写：

```c
#include <stdio.h>
int main() {
    int a, b;
    while(scanf("%d %d", &a, &b) != EOF) {
        printf("%d\n", a + b);
    }
    return 0;
} 
```

- 这里，我们先考虑`scanf("%d %d", &a, &b)`这个函数的返回值，当你从控制台输入两个数时，它会根据输入的格式正确与否，返回输入成功的数的个数，所以正常情况是返回 2 。
- 当没有任何输入时，它会返回 `EOF`，所以导致 **循环条件** 变成**假**，从而退出循环，退出循环以后就顺理成章的结束循环体，我们也就不能再进行输入了。

>   其中`EOF`是一个宏定义，代表文件结尾，它的值是 -1，也就是说：`scanf(...)`函数，在没有任何输入以后会返回 -1。

> 【例题1】请利用 while 循环来计算 斐波那契数列 第 n 项，斐波那契数列的定义如下：
> $$
> f(n)=\begin{cases}
> 1 & n=0 \\
> 1 & n=1 \\
> f(n-1)+f(n-2) & n>1
> \end{cases}
> $$

```c
#include <stdio.h>
int main()
{
	int n;
	int a = 0;

	scanf_s("%d", &n);
	while (n) {
		if (n == 0 || n == 1) {
			printf("%d\n", a = 1);
		} 
		else {
			printf("%d\n", a = ((n - 1) + (n - 2)));
			n = a;
		}
	}

	return 0;
}
```

### 2、do-while 语句

#### 1）语法规则

- 除了 while 循环，在 C语言 中还有一种 do-while 循环。
- do-while 的一般形式为：

```c
do{
    语句块
}while(表达式);
```

>   do-while 循环与 while 循环的区别在于：它会先执行 **语句块**，然后再判断 **表达式** 是否为真，如果为真则继续循环；如果为假，则终止循环。因此，do-while 循环至少要执行一次 **语句块**。

- 关于循环结构的内容，今天就先讲到这里了，后面还会提到 另一种循环结构 —— for 循环。循环结构可以帮助我们干很多事情，这个就需要大家自己去体会和摸索了，当然，课后习题也能够帮助大家更好的理解循环结构。